# Unikernel需求分析



---
Unikernel作为一种单一内存空间的内核镜像，优点在于**小**、**快**、**安全**。本文将从这三个角度并结合现状分析Unikernel的需求性。

## 安全  
  随着云时代的来临，计算机安全问题日益严重。2017年5月，“WannaCry”勒索病毒席卷全球，数十万电脑用户中招，造成的直接经济损失超过80亿美元。同年10月，东欧银行网络遭到黑客入侵，损失达上亿元。据不完全统计，每年全球仅因黑客攻击导致的直接经济损失达4500亿美元。从个人计算机到银行、政府的大型主机，无一不面临着黑客、木马等不安全因素的威胁。  
  
  另一方面，现有操作系统的冗余复杂，使得对计算机系统的维护变的十分困难，并且留下了大量的漏洞和攻击面(attack surface)，给恶意黑客以可乘之机。类似的例子有很多，拿windows10为例，仅2016年一年内，Microsoft为其修补的漏洞就达729个之多。“WannaCry”病毒也是利用windows系统中的“Enternalblue”漏洞来进行进攻的。  
  
  考虑到现有操作系统的设计缺陷和日益严重的安全问题，Unikernal的诞生也就是一件顺其自然的事了。在计算机领域，有时候小而简单的东西相对而言更加安全，维护起来也更加容易，Unikernal就是这样。Unikernal中没有shell，没有密码文件，也舍去了那些可能成为干扰源的视频和驱动。这极大地降低了Unikernal发生错误的可能，带来了更少的漏洞和更小的攻击面，大大地提高了安全性。
  
  
## 轻量  
  
  我们知道，现有操作系统内核往往都十分庞大，动辄十几个G，其架构也十分复杂，需要消耗大量的资源来执行其功能。预期相对应，当前的软件堆栈（software stack）也一般由成百上千个部分组成，经常需要使用千兆字节的内存和磁盘空间。他们花费大量宝贵的时间用于启动和关闭，大而缓慢。自从IBM PC出现之后，人们构建软件堆栈的方法几乎没有变化。37年来，我们一直在采用在硬件大而缓慢的时候设计的堆栈方法。如今，硬件系统已经发生了天翻地覆的变化，操作性能比过去有了数千倍的提高，为什么我们还在使用这种已经显然过时的堆栈方法呢？如果硬件系统发生了如此大的变化，那么软件系统是否也需要相应的进化以适应硬件的发展呢？  
  
  答案是显然的。Unikernal的出现正是对这一需求的呼应。想象一下一下子抹去95%的内核（你的应用根本不需要那些）是一种什么体验？省出大量的硬盘空间、应用运行得更加流畅...Unikernal正是这样！Unikernel 镜像都很小，由 MirageOS实现的一个 DNS server 才 184KB，一个 web server 仅仅674 KB，小到令人恐怖的程度。因此开发在Unikernal上的项目通常没有传统操作系统的弊端，这无疑使它更加适应现代硬件系统。  
  

## 快速  
  上文提到传统操作系统内核动辄占用十几个G的空间，这臃肿的结构带来的便是缓慢的运行速度。也许那十几秒的开机时间在你看来并不慢，但是在大型主机中，现有计算机的运行速度仍不能很好地满足要求，还有极大的改进空间。这一改进可以从计算机硬件入手，比如制造更大规模的集成芯片、提高cpu主频等等，但如果从操作系统入手，可能会产生更好的效果。  
  
  Unikrenal可以说是从操作系统入手，提高电脑运行速度的一个很好的尝试。由于Unikernal的轻量，精简了冗余的结构，删减了多余的步骤，其启动与停止都在毫秒级别，远远快于常规操作系统。运行在其上的应用程序也更加高效。
  
  
*Unikernal作为近些年来一个刚刚兴起的概念，其创造性是值得肯定的，如若更加完善，形成一个完整的开发链，那么对整个行业的裨益显而易见。*